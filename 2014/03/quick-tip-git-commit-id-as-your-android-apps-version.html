<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Quick tip - git commit id as your Android app's version</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" href="/media/css/main.css"/>
<link rel="signature" type="application/pgp-signature" href="quick-tip-git-commit-id-as-your-android-apps-version.html.asc"/>
</head>
<body class="hentry h-entry">
<h1><a href="/" class="p-author h-card" rel="author">KB Sriram</a></h1>

<div class="date dt-published published dt-updated updated"><time datetime="2014-03-13">March 13, 2014</time></div>
<h2 class="p-name entry-title">Quick tip - git commit id as your Android app's version</h2>
<div class="e-content entry-content">
<p >Recent versions of the Android build tools have made it very easy to
dynamically set the <code>version.name</code> (or the
<code>version.code</code> I guess) with just ant and the command line.</p>
<p >Remove the <code>version.name</code> attribute from your
<code>AndroidManifest.xml</code> file, and add this stanza to a
<code>custom_rules.xml</code> file.</p>
<pre >&#60;exec executable="git" outputproperty="version.name"&#62;
  &#60;arg value="rev-parse"/&#62;
  &#60;arg value="--short"/&#62;
  &#60;arg value="HEAD"/&#62;
&#60;/exec&#62;</pre>
<p >Edit to taste - that's it.ï»¿</p>
</div>
<div class="spacer"></div>
</body>
</html>
