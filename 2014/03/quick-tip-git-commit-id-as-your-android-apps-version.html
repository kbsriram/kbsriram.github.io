<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Quick tip - git commit id as your Android app's version</title>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<link rel="stylesheet" href="/media/css/main.css"/>
<link rel="signature" type="application/pgp-signature" href="quick-tip-git-commit-id-as-your-android-apps-version.html.asc"/>
</head>
<body class="hentry h-entry">
<h1><a href="/" class="p-author h-card" rel="author">KB Sriram</a></h1>

<div class="date dt-published published dt-updated updated"><time datetime="2014-03-13">March 13, 2014</time></div>
<h2 class="p-name entry-title">Quick tip - git commit id as your Android app's version</h2>
<div class="e-content entry-content">
<p >Recent versions of the Android build tools have made it very easy to
dynamically set the <tt>version.name</tt> (or the
<tt>version.code</tt> I guess) with just ant and the command line.</p>
<p >Remove the <tt>version.name</tt> attribute from your
<tt>AndroidManifest.xml</tt> file, and add this stanza to a
<tt>custom_rules.xml</tt> file.</p>
<pre >&#60;exec executable="git" outputproperty="version.name"&#62;
  &#60;arg value="rev-parse"/&#62;
  &#60;arg value="--short"/&#62;
  &#60;arg value="HEAD"/&#62;
&#60;/exec&#62;</pre>
<p >Edit to taste - that's it.ï»¿</p>
</div>
<div class="spacer"></div>
<address class="vcard h-card">
<img style="height: 2.6em; float: left; margin-right: 0.5em;" class="photo u-photo" alt="KB Sriram" src="/kbs.png"/>
Hi, I'm
<a href="http://kbsriram.com/" rel="author" class="fn url u-url p-name">KB Sriram</a>.<br/>
You can also find me on
<a href="https://plus.google.com/+KBSriram" rel="me">Google Plus</a> and
<a href="https://github.com/kbsriram" rel="me">Github</a>.
<a href="/kbs.gpg.txt" class="u-key" rel="key" type="application/pgp-keys">My key</a> and <a href="https://gist.github.com/kbsriram/c05dca103a252ac0d6ac/6b333d32f966f16bbe449ea4a9c82421a2d5bf38" class="u-pgp-fingerprint" rel="pgp-fingerprint">fingerprint</a>.
</address>
</body>
</html>
